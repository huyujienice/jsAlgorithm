# OSI七层网络模型  
Open System Interconnect,开放式系统互联

## 应用层
为应用程序提供服务  

## 表示层  
数据格式转化，数据加密  

## 会话层  
建立，管理和维护会话  

## 传输层  
建立，管理和维护端到端的连接  
建立端口（port）到端口的通信，端口是0到65535之间的一个整数，刚好是16个二进制位，0到1023的端口被系统占用，用户只能选择大于1023的端口。  
Unix系统就把主机+端口，叫做“套接字”（socket），源端口号+ip首部的ip源地址+目的端口号+ip首部的目的ip地址，唯一的确定了tcp连接。

### tcp协议结构

#### 首部
通常包含20个字节
1.1-2B（代表第一个到第二个字节）：源端口号  
2.3-4B:目的端口号  
3.5-8B:序号，tcp提供全双工服务，两端都有各自的序号。解决网络包乱序问题  
4.9-12B:确认序列号，上次成功收到的数据字节序号加1，ack为1才有效。解决丢包问题  
5.13.0-13.5B:6b长度，偏移量  
6.13.5B-14B:6b长度，保留  
7.13-14B:标识位，控制各种状态  
8.15-16B:窗口大小，接收端期望接收的字节数。解决流量控制的问题  
9.17-18B:校验和，由发送端结算和存储，由接收端校验。解决数据正确性问题  
10.19-20B:紧急指针  

##### 首部标识位说明
1.URG:为1时，表示紧急指针有效    
2.ACK:确认标识，连接建立成功后，总为1。为1时确认号有效    
3.PSH:接收方应尽快把这个报文交给应用层    
4.RST:复位标识，重新连接    
5.SYN:建立新连接时，改位为1    
6.FIN:关闭连接标识  
  



## 网络层  
IP选址及路由选择  
引进一套新的地址，使得我们区分不同的计算机是否属于同一个子网络，这套地址就是“网址”  

## 数据链路层  
提供介质访问和链路管理  
来自线路的二进制数据包称作一个帧
链路中这么多连续01如何分辨哪些是一个帧的信息？
以太网帧结构由前导码和帧开始符开始，冗余校验结尾，每个帧之间都有帧间距  

### 以太网结构  

#### 前同步码
10101010 10101010 10101010 10101010 10101010 10101010 10101010  
7个字节，作用是使接收端的适配器在接收MAC帧时能够迅速调整时钟频率，使它和发送端的频率相同  
#### 帧开始符
10101011  
1个字节  
一个帧已7个字节的前导码和1个字节的帧开始符作为帧的开始，即  
10101010 10101010 10101010 10101010 10101010 10101010 10101010 10101011 
//todo
//没搞清楚16进制为什么转成这样，不应该是0xaa吗？
由于在传输一个字节时最低位最先传输（LSB），因此对应的16进制表示为 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0xD5  
#### 报头,目的MAC地址
6个字节，目的地方的MAC地址，用处是当网卡接收到一个数据帧时，首先会检查该帧的目的地址，是否与当前适配器的物理地址相同，如果相同则进一步处理，不相同则丢弃  
#### 报头，源MAC地址  
6个字节，发送端的MAC地址    
报头包含源地址和目标地址的MAC地址  
#### 类型
2个字节，该字段在网络协议分解中及其重要，PDU（协议数据单元）来到某一层时，它需要将PDU交付给上层，而上层协议众多，所以在处理数据时，必须要一个字段标识我这个交付给谁。  
例如：该字段为0x0800时，表示将有效载荷交付给IP协议，为0x0806交付给ARP，0x8035交付给RARP。
#### 数据
有效负荷，需要交付给上层的数据。数据长度最小为46字节，最大为1500字节  
#### 帧校验码FCS
帧校验码是一个32位循环冗余校验码，以便验证帧数据是否被损坏  
#### 帧间隙
最小12个字节，其数据全为1？
11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111

## 物理层  



